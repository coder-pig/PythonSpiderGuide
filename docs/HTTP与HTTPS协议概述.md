# HTTP与HTTPS协议概述

&nbsp;

## 简述一次网络请求

一个习以为常的操作：打开浏览器 → 输入网址 → 回车 → 等待网页加载结束 → 浏览网页<br>
问题：整个过程的背后都发生了什么？ 笔者以访问百度为例，输入域名回车后：

### 1、通过URL查找服务器IP

> 将域名解析为对应服务器的IP地址，如www.baidu.com，浏览器并不认识这个域名，拆解下：<br>
> www是`服务器名`，baidu是`公司名或私人名`，com是 `域名根服务器`<br>
> 浏览器先访问 `本地hosts` 文件，检查文件中是否有与域名匹配的ip地址，有直接访问IP对应服务器；<br>
> 没有则向 `上层DNS服务器询问`，如果没有，继续向上层服务器访问，直到DNS根服务器。

可以在cmd终端中使用 `tracert` 命令查看数据包发送到目标服务器经过的路由结点及延迟，示例如下：

![](../media/pics/tracert_jump.png)

Tips：可输入`tracert -? ` 查看此命令的详细用法信息~

### 2、三次握手建立TCP连接

获取服务器IP后，就是跟服务器建立连接连接了，如图：

![](../media/pics/三次握手.png)

> - 客户端发送一个带 SYN 标志的数据包给服务器；
> - 服务器接收后，回传一个带 SYN/ACK 标志的数据包表示信息确认；
> - 客户端回传一个带 ACK 标志的数据包，表示握手结束，连接建立成功；

### 3、发送HTTP请求

客户端与服务器建立连接后就可以发送 HTTP 请求了，浏览器除了会发送<br>
`请求行` 与 `请求头信息` 外，还会发送 `一个空行` 代表请求头消息发送结束；<br>
如果是 POST 提交，还会提交 `请求体`.


### 4、服务器响应请求

Web服务器解析用户请求，进行处理，尔后把处理结果组装成响应报文，返回给客户端。

### 5、浏览器解析HTML

浏览器解析服务器返回的HTML代码，并请求其中用到的css/js/图片等资源。

### 6、页面渲染后呈现给用户

渲染的顺序是从上往下的，下载与渲染同时进行，最后加载完成显示到浏览器上。

## URI、URL与URN

## HTTP请求报文

## HTTP响应报文

## HTTPS
